{"version":3,"file":"fade.directive.js","sourceRoot":"","sources":["../../../../../../src/platform/core/common/animations/fade/fade.directive.ts"],"names":[],"mappings":"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","sourcesContent":["import { Directive, ElementRef, Input, Output, EventEmitter, HostBinding, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport { animate, AnimationBuilder, AnimationPlayer, AUTO_STYLE, style, animation } from '@angular/animations';\n\n@Directive({\n  selector: '[tdFade]',\n})\nexport class TdFadeDirective {\n\n  private _state: boolean;\n  private _defaultDisplay: string;\n  private _animationFadeInPlayer: AnimationPlayer;\n  private _animationFadeOutPlayer: AnimationPlayer;\n\n  /**\n   * duration?: number\n   * Sets duration of fade animation in milliseconds.\n   * Defaults to 150 ms.\n   */\n  @Input() duration: number = 150;\n\n  /**\n   * tdFade: boolean\n   * Fades element, FadesOut if its 'true', FadesIn if its 'false'.\n   */\n  @Input('tdFade')\n  set state(state: boolean) {\n    this._state = state;\n    if (state) {\n      if (this._animationFadeOutPlayer) {\n        this._animationFadeOutPlayer.destroy();\n        this._animationFadeOutPlayer = undefined;\n      }\n      this.hide();\n    } else {\n      if (this._animationFadeInPlayer) {\n        this._animationFadeInPlayer.destroy();\n        this._animationFadeInPlayer = undefined;\n      }\n      this.show();\n    }\n  }\n\n  /**\n   * fadeIn?: function\n   * Method to be executed when fadeIn animation ends.\n   */\n  @Output('fadeIn') onFadeIn: EventEmitter<void> = new EventEmitter<void>();\n\n  /**\n   * fadeOut?: function\n   * Method to be executed when fadeOut animation ends.\n   */\n  @Output('fadeOut') onFadeOut: EventEmitter<void> = new EventEmitter<void>();\n\n  /**\n   * Binds native 'aria-expanded' attribute.\n   */\n  @HostBinding('attr.aria-expanded')\n  get ariaExpandedBinding(): boolean {\n    return !this._state;\n  }\n\n  /**\n   * Binds native 'aria-hidden' attribute.\n   */\n  @HostBinding('attr.aria-hidden')\n  get ariaHiddenBinding(): boolean {\n    return this._state;\n  }\n\n  constructor(private _renderer: Renderer2,\n              private _element: ElementRef,\n              private _changeDetectorRef: ChangeDetectorRef,\n              private _animationBuilder: AnimationBuilder) {\n    this._defaultDisplay = this._element.nativeElement.style.display;\n  }\n\n  /**\n   * Hides element: starts animation and adds \"display:'none'\" style at the end.\n   */\n  hide(): void {\n    this._animationFadeInPlayer = this._animationBuilder.build(animation([\n      style({\n        opacity: AUTO_STYLE,\n        display: AUTO_STYLE,\n      }),\n      animate(this.duration + 'ms ease-out', style({opacity: '0'})),\n    ])).create(this._element.nativeElement);\n    this._animationFadeInPlayer.onDone(() => {\n      this._onFadeInDone();\n    });\n    this._animationFadeInPlayer.play();\n  }\n\n  /**\n   * Shows element: sets \"display:[default]\" so animation is shown.\n   */\n  show(): void {\n    this._renderer.setStyle(this._element.nativeElement, 'display', this._defaultDisplay);\n    this._changeDetectorRef.markForCheck();\n    this._animationFadeOutPlayer = this._animationBuilder.build(animation([\n      style({\n        opacity: '0',\n        display: 'none',\n      }),\n      animate(this.duration + 'ms ease-in', style({opacity: AUTO_STYLE})),\n    ])).create(this._element.nativeElement);\n    this._animationFadeOutPlayer.onDone(() => {\n      this._onFadeOutDone();\n    });\n    this._animationFadeOutPlayer.play();\n  }\n\n  private _onFadeInDone(): void {\n    if (this._animationFadeInPlayer) {\n      this._animationFadeInPlayer.destroy();\n      this._animationFadeInPlayer = undefined;\n      this._renderer.setStyle(this._element.nativeElement, 'display', 'none');\n      this._changeDetectorRef.markForCheck();\n      this.onFadeIn.emit();\n    }\n  }\n\n  private _onFadeOutDone(): void {\n    if (this._animationFadeOutPlayer) {\n      this._animationFadeOutPlayer.destroy();\n      this._animationFadeOutPlayer = undefined;\n      this._changeDetectorRef.markForCheck();\n      this.onFadeOut.emit();\n    }\n  }\n}\n"]}