#VRML V2.0 utf8
Configuration {
  accumulation Accumulation { enabled TRUE }
}
ColorBackground {
  color 0.5 0.5 0.5 0
  clearStencil TRUE
}
NavigationInfo { type [ "EXAMINE" "ANY" ] }
Viewpoint {
  # type "ORTHOGONAL"
  # fieldOfView 3.04
  # radiusScale 0.7
}
DEF INC1 Incrementor {
  minValue 1
  maxValue 10
  value 1
}
DEF INC2 Incrementor {
  minValue 1
  maxValue 10
  value 1
}
DEF TRANSFORMER_NAV NavigationInfo { type [ "TRANSFORM" ] }
DEF EXPORT_KEY SingleKeySensor { key "O" }
DEF SNAP_KEY SingleKeySensor { key "S" }
DEF INC_KEY1 SingleKeySensor { key "i" }
DEF INC_KEY2 SingleKeySensor { key "j" }

DEF SNAP Snapshot {
  image Image { }
  fileFormat "jpg"
  sequence FALSE
  dirName "."
  fileName "lego_brick"
}

Transform {
  #bboxCenter 0 0 0
  #bboxSize 1.5 1.5 1.5
  rotation 1 0 0 -1.5708
  children [
    Shape {
      appearance Appearance {
	material Material {
	  diffuseColor 0.7 0.7 0.7
	  ambientIntensity 0.2
	  transparency 0
	}
	# texture ImageTexture { url ["negx.jpg"] }
	texture CubeEnvironment {
	  leftImage Image { url ["negx.jpg"] }
	  rightImage Image { url ["posx.jpg"] }
	  frontImage Image { url ["negy.jpg"] }
	  backImage Image { url ["posy.jpg"] }
	  bottomImage Image { url ["negz.jpg"] }
	  topImage Image { url ["posz.jpg"] }
	}
      }
      geometry DEF BRICK EgoBrick {
	# knobsVisible FALSE
	numberOfKnobs1 1
	numberOfKnobs2 1
	knobSlices 16
      }
    }

    # The axes:
    Switch {
      whichChoice -1
      children [
	Transform {
	  scale 0.7 0.7 0.7
	  children [
	    Transform {
	      translation 2.5 0 0
	      rotation 1 0 0 1.5708
	      children [
		Transform {
		  translation 0 -0.3 0
		  children [
		    Shape {
		      appearance DEF TEXT_APP Appearance {
			material Material { diffuseColor 0 0 0 }
		      }
		      geometry Text {
			string "X"
			fontStyle FontStyle { size 0.5 }
		      }
		    }
		   ]
		}
	       ]
	    }
	    Transform {
	      translation 0 2.5 0
	      rotation 1 0 0 1.5708
	      children [
		Transform {
		  translation -0.2 0 0
		  children [
		    Shape {
		      appearance USE TEXT_APP
		      geometry Text {
			string "Y"
			fontStyle FontStyle { size 0.5 }
		      }
		    }
		   ]
		}
	       ]
	    }
	    Transform {
	      translation 0 0 2.5
	      rotation 1 0 0 1.5708
	      children [
		Transform {
		  translation -0.2 0 0
		  children [
		    Shape {
		      appearance USE TEXT_APP
		      geometry Text {
			string "Z"
			fontStyle FontStyle { size 0.5 }
		      }
		    }
		   ]
		}
	       ]
	    }
	    Shape {
	      appearance DEF CS_APP Appearance {
		material Material { diffuseColor 0.5 0.5 0.5 }
	      }
	      geometry Sphere { radius 0.1 }
	    }
	    DEF CS_AXIS Transform {
	      translation 0 1 0
	      children [
		Shape {
		  appearance USE CS_APP
		  geometry DEF CS_CYLINDER Cylinder {
		    radius 0.1
		    bottom FALSE
		    top FALSE
		  }
		}
		Transform {
		  translation 0 1.2 0
		  children [
		    Shape {
		      appearance USE CS_APP
		      geometry DEF CS_CONE Cone {
			bottomRadius 0.2
			height 0.4
		      }
		    }
		   ]
		}
	       ]
	    }
	    Transform {
	      rotation 0 0 1 -1.57
	      children [ USE CS_AXIS ]
	    }
	    Transform {
	      rotation 1 0 0 1.57
	      children [ USE CS_AXIS ]
	    }
	   ]
	}
       ]
    }

   ]
}

ROUTE SNAP_KEY.state TO SNAP.trigger

ROUTE INC_KEY1.state TO INC1.trigger
ROUTE INC1.value TO BRICK.numberOfKnobs1

ROUTE INC_KEY2.state TO INC2.trigger
ROUTE INC2.value TO BRICK.numberOfKnobs2
