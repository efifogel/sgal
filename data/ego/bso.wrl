#VRML V2.0 utf8
DEF CONFIG Configuration {
  stencilBits 1
}
DEF SIM Simulation {}

ColorBackground {
  color 0.5 0.5 0.5 1
  clearStencil TRUE
}

# Viewpoint {
#   type "SIMPLE"
#   radiusScale 0.74
#   fieldOfView 0.5
#   positionTranslation 0.4 0 0
# }
DEF EXAMINE_NAV NavigationInfo { type [ "EXAMINE" "ANY" ] }
DEF ROBOT_NAVIGATION NavigationInfo {
  type [ "TRANSFORM" ]
  translation 3 0 0
  rotation 1 -1 0 0.5
}

Transform {
  rotation 1 -1 0 0.3
  children [

    Switch {
      whichChoice 0
      children [
	Transform {
	  translation -3 0 0
	  children [
	    DEF CUBE Shape {
	      appearance Appearance {
		material Material { diffuseColor 0.6 0.3 0.2 }
	      }
	      geometry DEF OPERAND1 IndexedFaceSet {
		coord Coordinate {
		  point [-0.5 -0.5 -0.5,
			  0.5 -0.5 -0.5,
			  0.5  0.5 -0.5,
			 -0.5  0.5 -0.5,
			 -0.5 -0.5  0.5,
			  0.5 -0.5  0.5,
			  0.5  0.5  0.5,
			 -0.5  0.5  0.5
			]
		}
		coordIndex [3 2 1 0 -1 4 5 6 7 -1
			    2 6 5 1 -1 0 4 7 3 -1
			    7 6 2 3 -1 0 1 5 4 -1
			   ]
	      }
	    }
	   ]
	}
       ]
    }
    Switch {
      whichChoice 0
      children [
	Transform {
	  translation 3 0 0
	  children [
	    DEF TRIANGLE Shape {
	      appearance Appearance {
		material Material { diffuseColor 0.2 0.3 0.6 }
	      }
	      geometry DEF OPERAND2 IndexedFaceSet {
		coord Coordinate {
		  point [-1 -0.73 -0.73,
			 0 -0.73 1,
			 1 -0.73 -0.73,
			 0, 1, 0]
		}
		coordIndex [2 1 0 -1, 0 1 3 -1, 1 2 3 -1 2 0 3 -1]
	      }
	    }
	   ]
	}
       ]
    }

    DEF INTERSECTION Shape {
      appearance Appearance {
    	material Material { diffuseColor 0.4 0.4 0.4 }
      }
    }
  ]
}

DEF BO BooleanOperation {
  operation "intersection"
  operand1 USE OPERAND1
  operand2 USE OPERAND2
}

ROUTE SIM.start TO BO.trigger
ROUTE BO.result TO INTERSECTION.geometry
