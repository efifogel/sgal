# Copyright (c) 2012  Israel.
# All rights reserved.
#
# This file is part of the collection of Efi Fogel.
# You may redistribute it under the terms of the Q Public License version 1.0.
#
# This file is provided AS IS with NO WARRANTY OF ANY KIND, INCLUDING THE
# WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
#
# Author(s)     : Efi Fogel

BASEDIR =.
MULTITHREAD =1
USE_SHARED =1


include $(ROOT)/make/cgaldef.mak
include $(MAKEDIR)/scgaldef.mak

# Target, etc.:
BASETARGET =SEGO
BASEINSTALLDIR =$(ROOT)

CPPSOURCES =
CPPSOURCES+= Ego_geo.cpp
CPPSOURCES+= Ego_brick.cpp
CPPSOURCES+= init.cpp
CPPSOURCES+= Ego_voxelizer.cpp
CPPSOURCES+= Ego_voxels_filler.cpp
CPPSOURCES+= Ego_voxels_filler_graph.cpp
CPPSOURCES+= Ego_voxels.cpp
CPPSOURCES+= Ego_voxels_tiler.cpp

LCPPDEFS+= -DSGAL_LIB
LCPPDEFS+= -DSCGAL_NT=$(SCGAL_NT)
LCPPDEFS+= -DSCGAL_KERNEL=$(SCGAL_KERNEL)

# LCPPDEFS+= -DVERBOSE

# Include:
LCPPINCS = -I$(BASEDIR)
LCPPINCS+= -I$(BASEDIR)/../include

# Add BOOST, GMP, MPFR, and Magick include directory:
ifdef BOOST_INC_DIR
LCPPINCS+= -I"$(BOOST_INC_DIR)"
endif

ifdef GMP_INC_DIR
LCPPINCS+= -I"$(GMP_INC_DIR)"
endif

ifdef MPFR_INC_DIR
LCPPINCS+= -I"$(MPFR_INC_DIR)"
endif

ifdef MAGICK_INC_DIR
LCPPINCS+= -I"$(MAGICK_INC_DIR)"
endif

#
LCPPINCS+= $(CGALCPPINCS)

ifeq ($(DE), gnu)
LCPPDEFS+= -DGL_GLEXT_PROTOTYPES
LCPPOPTS+= -Wall -Werror
LCPPOPTS+= -frounding-math
# LCPPOPTS+= -pedantic
endif

ifeq ($(DE), msvc)
LCPPDEFS+=-DBOOST_ALL_DYN_LINK
LCPPOPTS+= -GR
LCPPOPTS+= -vmg
LMAKEDEPENDFLAGS+= -DBOOST_TOKENIZER_JRB070303_HPP_
LMAKEDEPENDFLAGS+= -DBOOST_TRANSFORM_ITERATOR_23022003THW_HPP
LMAKEDEPENDFLAGS+= -DBOOST_MPL_OR_HPP_INCLUDED
LMAKEDEPENDFLAGS+= -DBOOST_MPL_AND_HPP_INCLUDED
LMAKEDEPENDFLAGS+= -DBOOST_FILESYSTEM_PATH_HPP
LMAKEDEPENDFLAGS+= -DBOOST_LEXICAL_CAST_INCLUDED
LMAKEDEPENDFLAGS+= -DCOUNTING_ITERATOR_DWA200348_HPP
LMAKEDEPENDFLAGS+= -DBOOST_PROPERTY_MAP_HPP
LMAKEDEPENDFLAGS+= -DBOOST_GRAPH_PROPERTIES_HPP
LMAKEDEPENDFLAGS+= -DBOOST_GRAPH_CONCEPTS_HPP
LMAKEDEPENDFLAGS+= -DBOOST_GRAPH_DIJKSTRA_HPP
LMAKEDEPENDFLAGS+= -DBOOST_GRAPH_UTILITY_HPP
LMAKEDEPENDFLAGS+= -DBOOST_GRAPH_STRONG_COMPONENTS_HPP
LMAKEDEPENDFLAGS+= -DBOOST_ADJACENCY_MATRIX_HPP
LMAKEDEPENDFLAGS+= -DBOOST_RANDOM_CONST_MOD_HPP
LMAKEDEPENDFLAGS+= -DBOOST_RANDOM_ADDITIVE_COMBINE_HPP
LMAKEDEPENDFLAGS+= -DBOOST_RANDOM_HPP
LMAKEDEPENDFLAGS+= -DCGAL_INTERSECTION_3_H
LMAKEDEPENDFLAGS+= -DBOOST_RANDOM_LINEAR_CONGRUENTIAL_HPP
LMAKEDEPENDFLAGS+= -DBOOST_RANDOM_UNIFORM_INT_HPP
LMAKEDEPENDFLAGS+= -D_MACHINE__DEFAULT_TYPES_H
endif

LDIRT = parse.output

include $(MAKEDIR)/basedir.mak
include $(MAKEDIR)/comrul.mak
include $(MAKEDIR)/comp.mak
include $(MAKEDIR)/targlib.mak

vpath %.cpp $(BASEDIR)/geo
vpath %.cpp $(BASEDIR)/geometries
