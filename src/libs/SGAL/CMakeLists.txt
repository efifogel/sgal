#Check for bison
find_package(BISON 2.7 REQUIRED)
find_package(FLEX 2.5.31 REQUIRED)
find_package(OpenGL REQUIRED)

set (GENERATED_DIR "${CMAKE_BINARY_DIR}/src/libs/SGAL/generated")

file(MAKE_DIRECTORY ${GENERATED_DIR})

# Create custom command for flex
add_custom_command(
	OUTPUT ${GENERATED_DIR}/scan.cpp
	COMMAND ${FLEX_EXECUTABLE}
	ARGS -d -+ --nounistd -o ${GENERATED_DIR}/scan.cpp ${CMAKE_CURRENT_LIST_DIR}/lib/loaders/scan.l
	DEPENDS ${CMAKE_CURRENT_LIST_DIR}/lib/loaders/scan.l)

# Create custom command for bison (note the DEPENDS)
set(SGAL_BISON_OUTPUT ${GENERATED_DIR}/parse.cpp
		      ${GENERATED_DIR}/parse.hpp
		      ${GENERATED_DIR}/location.hh
		      ${GENERATED_DIR}/position.hh
		      ${GENERATED_DIR}/stack.hh)

add_custom_command(
	OUTPUT ${SGAL_BISON_OUTPUT}
	COMMAND ${BISON_EXECUTABLE}
	ARGS -y ${CMAKE_CURRENT_LIST_DIR}/lib/loaders/parse.y -o ${GENERATED_DIR}/parse.cpp
	DEPENDS ${GENERATED_DIR}/scan.cpp ${CMAKE_CURRENT_LIST_DIR}/lib/loaders/parse.y)

# Add parser.c to the list of sources
set(SGAL_AUTO_GENERATED_FILES ${SGAL_AUTO_GENERATED_FILES} ${GENERATED_DIR}/parse.cpp)
set(SGAL_AUTO_GENERATED_FILES ${SGAL_AUTO_GENERATED_FILES} ${GENERATED_DIR}/scan.cpp)
set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} ${SGAL_AUTO_GENERATED_FILES})
source_group(src\\generated FILES ${SGAL_AUTO_GENERATED_FILES})

# Since parser.c does not exists yet when cmake is run, mark
# it as generated
set_source_files_properties(${GENERATED_DIR}/parse.cpp GENERATED)
set_source_files_properties(${GENERATED_DIR}/scan.cpp GENERATED)

# Include binary directory to include lexer.c in parser.c
include_directories(${GENERATED_DIR})

#Look for cpp files (Removed for now due to unmaintained files)
#file(GLOB_RECURSE SGAL_SOURCE_FILES *.cpp)

#Engines
set(SGAL_ENGINES_SOURCE_FILES ${SGAL_ENGINES_SOURCE_FILES} lib/engines/Image_to_height_map.cpp)
set(SGAL_ENGINES_SOURCE_FILES ${SGAL_ENGINES_SOURCE_FILES} lib/engines/Image_writer.cpp)
set(SGAL_ENGINES_SOURCE_FILES ${SGAL_ENGINES_SOURCE_FILES} lib/engines/Incrementor.cpp)
set(SGAL_ENGINES_SOURCE_FILES ${SGAL_ENGINES_SOURCE_FILES} lib/engines/Snapshotter.cpp)
set(SGAL_ENGINES_SOURCE_FILES ${SGAL_ENGINES_SOURCE_FILES} lib/engines/Sphere_plane_intersection.cpp)
set(SGAL_ENGINES_HEADER_FILES ${SGAL_ENGINES_HEADER_FILES} include/engines/SGAL/Image_to_height_map.hpp)
set(SGAL_ENGINES_HEADER_FILES ${SGAL_ENGINES_HEADER_FILES} include/engines/SGAL/Image_writer.hpp)
set(SGAL_ENGINES_HEADER_FILES ${SGAL_ENGINES_HEADER_FILES} include/engines/SGAL/Incrementor.hpp)
set(SGAL_ENGINES_HEADER_FILES ${SGAL_ENGINES_HEADER_FILES} include/engines/SGAL/Snapshotter.hpp)
set(SGAL_ENGINES_HEADER_FILES ${SGAL_ENGINES_HEADER_FILES} include/engines/SGAL/Sphere_plane_intersection.hpp)
set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} ${SGAL_ENGINES_SOURCE_FILES} ${SGAL_ENGINES_HEADER_FILES})
source_group(src\\engines FILES ${SGAL_ENGINES_SOURCE_FILES} ${SGAL_ENGINES_HEADER_FILES})

#Primitives
set(SGAL_PRIMITIVES_SOURCE_FILES ${SGAL_PRIMITIVES_SOURCE_FILES} lib/primitives/Item_primitive.cpp)
set(SGAL_PRIMITIVES_SOURCE_FILES ${SGAL_PRIMITIVES_SOURCE_FILES} lib/primitives/Math_defs.cpp)
set(SGAL_PRIMITIVES_HEADER_FILES ${SGAL_PRIMITIVES_HEADER_FILES} include/primitives/SGAL/Array_types.hpp)
set(SGAL_PRIMITIVES_HEADER_FILES ${SGAL_PRIMITIVES_HEADER_FILES} include/primitives/SGAL/Bit_mask.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_PRIMITIVES_HEADER_FILES} include/primitives/SGAL/Epec_kernel.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_PRIMITIVES_HEADER_FILES} include/primitives/SGAL/Epic_kernel.hpp)
set(SGAL_PRIMITIVES_HEADER_FILES ${SGAL_PRIMITIVES_HEADER_FILES} include/primitives/SGAL/Inexact_kernel.hpp)
set(SGAL_PRIMITIVES_HEADER_FILES ${SGAL_PRIMITIVES_HEADER_FILES} include/primitives/SGAL/Item_primitive.hpp)
set(SGAL_PRIMITIVES_HEADER_FILES ${SGAL_PRIMITIVES_HEADER_FILES} include/primitives/SGAL/Math_defs.hpp)
set(SGAL_PRIMITIVES_HEADER_FILES ${SGAL_PRIMITIVES_HEADER_FILES} include/primitives/SGAL/min_max.hpp)
set(SGAL_PRIMITIVES_HEADER_FILES ${SGAL_PRIMITIVES_HEADER_FILES} include/primitives/SGAL/Types.hpp)
set(SGAL_PRIMITIVES_HEADER_FILES ${SGAL_PRIMITIVES_HEADER_FILES} include/primitives/SGAL/Version_info.hpp)
set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} ${SGAL_PRIMITIVES_SOURCE_FILES} ${SGAL_PRIMITIVES_HEADER_FILES})
source_group(src\\primitives FILES ${SGAL_PRIMITIVES_SOURCE_FILES} ${SGAL_PRIMITIVES_HEADER_FILES})

#Events
set(SGAL_EVENTS_SOURCE_FILES ${SGAL_EVENTS_SOURCE_FILES} lib/events/Draw_event.cpp)
set(SGAL_EVENTS_SOURCE_FILES ${SGAL_EVENTS_SOURCE_FILES} lib/events/Keyboard_event.cpp)
set(SGAL_EVENTS_SOURCE_FILES ${SGAL_EVENTS_SOURCE_FILES} lib/events/Mouse_event.cpp)
set(SGAL_EVENTS_SOURCE_FILES ${SGAL_EVENTS_SOURCE_FILES} lib/events/Motion_event.cpp)
set(SGAL_EVENTS_SOURCE_FILES ${SGAL_EVENTS_SOURCE_FILES} lib/events/Passive_motion_event.cpp)
set(SGAL_EVENTS_SOURCE_FILES ${SGAL_EVENTS_SOURCE_FILES} lib/events/Redraw_event.cpp)
set(SGAL_EVENTS_SOURCE_FILES ${SGAL_EVENTS_SOURCE_FILES} lib/events/Reset_event.cpp)
set(SGAL_EVENTS_SOURCE_FILES ${SGAL_EVENTS_SOURCE_FILES} lib/events/Reshape_event.cpp)
set(SGAL_EVENTS_SOURCE_FILES ${SGAL_EVENTS_SOURCE_FILES} lib/events/Simulate_event.cpp)
set(SGAL_EVENTS_SOURCE_FILES ${SGAL_EVENTS_SOURCE_FILES} lib/events/Start_event.cpp)
set(SGAL_EVENTS_SOURCE_FILES ${SGAL_EVENTS_SOURCE_FILES} lib/events/Stop_event.cpp)
set(SGAL_EVENTS_SOURCE_FILES ${SGAL_EVENTS_SOURCE_FILES} lib/events/Tick_event.cpp)
set(SGAL_EVENTS_SOURCE_FILES ${SGAL_EVENTS_SOURCE_FILES} lib/events/Event_handler.cpp)
set(SGAL_EVENTS_SOURCE_FILES ${SGAL_EVENTS_SOURCE_FILES} lib/events/Event.cpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Agent.hpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Draw_event.hpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Event.hpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Event_handler.hpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Keyboard_event.hpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Motion_event.hpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Mouse_event.hpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Passive_motion_event.hpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Redraw_event.hpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Reset_event.hpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Reshape_event.hpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Simulate_event.hpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Start_event.hpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Stop_event.hpp)
set(SGAL_EVENTS_HEADER_FILES ${SGAL_EVENTS_HEADER_FILES} include/events/SGAL/Tick_event.hpp)
set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} ${SGAL_EVENTS_SOURCE_FILES} ${SGAL_EVENTS_HEADER_FILES})
source_group(src\\events FILES ${SGAL_EVENTS_SOURCE_FILES} ${SGAL_EVENTS_HEADER_FILES})

#Geometries
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Boundary_set.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Color_array.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Coord_array.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Coord_array_1d.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Coord_array_2d.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Coord_array_3d.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Coord_transformer.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Coord_minkowski.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Elevation_grid.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Epec_coord_array_2d.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Epec_coord_array_3d.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Epec_normal_array.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Epec_plane_array.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Epic_coord_array_3d.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Extrusion.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Geo_set.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Geometry.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Indexed_face_set.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Indexed_line_set.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Indexed_line_set_draw.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Indexed_geodesic_set.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Indexed_face_set_draw.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Mesh_set.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Normal_array.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Piece.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Tex_coord_array.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Tex_coord_array_2d.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Tex_coord_array_3d.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Tex_coord_array_4d.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Text.cpp)
set(SGAL_GEOMETRIES_SOURCE_FILES ${SGAL_GEOMETRIES_SOURCE_FILES} lib/geometries/Text_3d.cpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/calculate_multiple_normals_per_vertex.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Color_array.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Coord_array.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Coord_array_1d.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Coord_array_2d.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Coord_array_3d.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Coord_minkowski.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Coord_transformer.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Elevation_grid.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Epec_coord_array_2d.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Epec_coord_array_3d.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Epec_normal_array.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Epec_plane_array.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Epec_polyhedron.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Extrusion.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Geo_set.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Geometry.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Indexed_face_set.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Indexed_face_set_mask.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Indexed_geodesic_set.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Indexed_line_set.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Indexed_line_set_mask.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Mesh_set.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Normal_array.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Piece.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Polyhedron.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Polyhedron_geo_builder.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Tex_coord_array.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/set_mask.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Tex_coord_array_2d.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Tex_coord_array_3d.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Tex_coord_array_4d.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Text.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/geometries/SGAL/Text_3d.hpp)
set(SGAL_GEOMETRIES_HEADER_FILES ${SGAL_GEOMETRIES_HEADER_FILES} include/SGAL/Text_geometry.hpp)
set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} ${SGAL_GEOMETRIES_SOURCE_FILES} ${SGAL_GEOMETRIES_HEADER_FILES})
source_group(src\\geometries FILES ${SGAL_GEOMETRIES_SOURCE_FILES} ${SGAL_GEOMETRIES_HEADER_FILES})

# Primitive Shapes
set(SGAL_PRIMITIVE_SHAPES_SOURCE_FILES ${SGAL_PRIMITIVE_SHAPES_SOURCE_FILES} lib/geometries/primitive_shapes/Arc.cpp)
set(SGAL_PRIMITIVE_SHAPES_SOURCE_FILES ${SGAL_PRIMITIVE_SHAPES_SOURCE_FILES} lib/geometries/primitive_shapes/Box.cpp)
set(SGAL_PRIMITIVE_SHAPES_SOURCE_FILES ${SGAL_PRIMITIVE_SHAPES_SOURCE_FILES} lib/geometries/primitive_shapes/Cone.cpp)
set(SGAL_PRIMITIVE_SHAPES_SOURCE_FILES ${SGAL_PRIMITIVE_SHAPES_SOURCE_FILES} lib/geometries/primitive_shapes/Cylinder.cpp)
set(SGAL_PRIMITIVE_SHAPES_SOURCE_FILES ${SGAL_PRIMITIVE_SHAPES_SOURCE_FILES} lib/geometries/primitive_shapes/Cylindrical_patch.cpp)
set(SGAL_PRIMITIVE_SHAPES_SOURCE_FILES ${SGAL_PRIMITIVE_SHAPES_SOURCE_FILES} lib/geometries/primitive_shapes/Ellipsoid.cpp)
set(SGAL_PRIMITIVE_SHAPES_SOURCE_FILES ${SGAL_PRIMITIVE_SHAPES_SOURCE_FILES} lib/geometries/primitive_shapes/Geodesic.cpp)
set(SGAL_PRIMITIVE_SHAPES_SOURCE_FILES ${SGAL_PRIMITIVE_SHAPES_SOURCE_FILES} lib/geometries/primitive_shapes/Sphere.cpp)
set(SGAL_PRIMITIVE_SHAPES_SOURCE_FILES ${SGAL_PRIMITIVE_SHAPES_SOURCE_FILES} lib/geometries/primitive_shapes/Torus.cpp)
set(SGAL_PRIMITIVE_SHAPES_HEADER_FILES ${SGAL_PRIMITIVE_SHAPES_HEADER_FILES} include/geometries/primitive_shapes/SGAL/Arc.hpp)
set(SGAL_PRIMITIVE_SHAPES_HEADER_FILES ${SGAL_PRIMITIVE_SHAPES_HEADER_FILES} include/geometries/primitive_shapes/SGAL/Box.hpp)
set(SGAL_PRIMITIVE_SHAPES_HEADER_FILES ${SGAL_PRIMITIVE_SHAPES_HEADER_FILES} include/geometries/primitive_shapes/SGAL/Cone.hpp)
set(SGAL_PRIMITIVE_SHAPES_HEADER_FILES ${SGAL_PRIMITIVE_SHAPES_HEADER_FILES} include/geometries/primitive_shapes/SGAL/Cylinder.hpp)
set(SGAL_PRIMITIVE_SHAPES_HEADER_FILES ${SGAL_PRIMITIVE_SHAPES_HEADER_FILES} include/geometries/primitive_shapes/SGAL/Cylindrical_patch.hpp)
set(SGAL_PRIMITIVE_SHAPES_HEADER_FILES ${SGAL_PRIMITIVE_SHAPES_HEADER_FILES} include/geometries/primitive_shapes/SGAL/Ellipsoid.hpp)
set(SGAL_PRIMITIVE_SHAPES_HEADER_FILES ${SGAL_PRIMITIVE_SHAPES_HEADER_FILES} include/geometries/primitive_shapes/SGAL/Geodesic.hpp)
set(SGAL_PRIMITIVE_SHAPES_HEADER_FILES ${SGAL_PRIMITIVE_SHAPES_HEADER_FILES} include/geometries/primitive_shapes/SGAL/Sphere.hpp)
set(SGAL_PRIMITIVE_SHAPES_HEADER_FILES ${SGAL_PRIMITIVE_SHAPES_HEADER_FILES} include/geometries/primitive_shapes/SGAL/Torus.hpp)
set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} ${SGAL_PRIMITIVE_SHAPES_SOURCE_FILES} ${SGAL_PRIMITIVE_SHAPES_HEADER_FILES})
source_group(src\\geometries\\primitive_shapes FILES ${SGAL_PRIMITIVE_SHAPES_SOURCE_FILES} ${SGAL_PRIMITIVE_SHAPES_HEADER_FILES})

#Sensors
set(SGAL_SENSORS_SOURCE_FILES ${SGAL_SENSORS_SOURCE_FILES} lib/sensors/Drag_sensor.cpp)
set(SGAL_SENSORS_SOURCE_FILES ${SGAL_SENSORS_SOURCE_FILES} lib/sensors/Key_sensor.cpp)
set(SGAL_SENSORS_SOURCE_FILES ${SGAL_SENSORS_SOURCE_FILES} lib/sensors/Navigation_sensor.cpp)
set(SGAL_SENSORS_SOURCE_FILES ${SGAL_SENSORS_SOURCE_FILES} lib/sensors/Proximity_sensor.cpp)
set(SGAL_SENSORS_SOURCE_FILES ${SGAL_SENSORS_SOURCE_FILES} lib/sensors/Single_key_sensor.cpp)
set(SGAL_SENSORS_SOURCE_FILES ${SGAL_SENSORS_SOURCE_FILES} lib/sensors/Time_sensor.cpp)
set(SGAL_SENSORS_SOURCE_FILES ${SGAL_SENSORS_SOURCE_FILES} lib/sensors/Touch_sensor.cpp)
set(SGAL_SENSORS_HEADER_FILES ${SGAL_SENSORS_HEADER_FILES} include/sensors/SGAL/Drag_sensor.hpp)
set(SGAL_SENSORS_HEADER_FILES ${SGAL_SENSORS_HEADER_FILES} include/sensors/SGAL/Flow_sensor.hpp)
set(SGAL_SENSORS_HEADER_FILES ${SGAL_SENSORS_HEADER_FILES} include/sensors/SGAL/Key_sensor.hpp)
set(SGAL_SENSORS_HEADER_FILES ${SGAL_SENSORS_HEADER_FILES} include/sensors/SGAL/Navigation_sensor.hpp)
set(SGAL_SENSORS_HEADER_FILES ${SGAL_SENSORS_HEADER_FILES} include/sensors/SGAL/Proximity_sensor.hpp)
set(SGAL_SENSORS_HEADER_FILES ${SGAL_SENSORS_HEADER_FILES} include/sensors/SGAL/Single_key_sensor.hpp)
set(SGAL_SENSORS_HEADER_FILES ${SGAL_SENSORS_HEADER_FILES} include/sensors/SGAL/Time_sensor.hpp)
set(SGAL_SENSORS_HEADER_FILES ${SGAL_SENSORS_HEADER_FILES} include/sensors/SGAL/Touch_sensor.hpp)
set(SGAL_SENSORS_HEADER_FILES ${SGAL_SENSORS_HEADER_FILES} include/sensors/SGAL/View_sensor.hpp)
set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} ${SGAL_SENSORS_SOURCE_FILES} ${SGAL_SENSORS_HEADER_FILES})
source_group(src\\sensors FILES ${SGAL_SENSORS_SOURCE_FILES} ${SGAL_SENSORS_HEADER_FILES})

#Light
set(SGAL_LIGHTS_SOURCE_FILES ${SGAL_LIGHTS_SOURCE_FILES} lib/lights/Light.cpp)
set(SGAL_LIGHTS_SOURCE_FILES ${SGAL_LIGHTS_SOURCE_FILES} lib/lights/Point_light.cpp)
set(SGAL_LIGHTS_SOURCE_FILES ${SGAL_LIGHTS_SOURCE_FILES} lib/lights/Spot_light.cpp)
set(SGAL_LIGHTS_SOURCE_FILES ${SGAL_LIGHTS_SOURCE_FILES} lib/lights/Directional_light.cpp)
set(SGAL_LIGHTS_HEADER_FILES ${SGAL_LIGHTS_HEADER_FILES} include/lights/SGAL/Directional_light.hpp)
set(SGAL_LIGHTS_HEADER_FILES ${SGAL_LIGHTS_HEADER_FILES} include/lights/SGAL/Light.hpp)
set(SGAL_LIGHTS_HEADER_FILES ${SGAL_LIGHTS_HEADER_FILES} include/lights/SGAL/Point_light.hpp)
set(SGAL_LIGHTS_HEADER_FILES ${SGAL_LIGHTS_HEADER_FILES} include/lights/SGAL/Spot_light.hpp)
set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} ${SGAL_LIGHTS_SOURCE_FILES} ${SGAL_LIGHTS_HEADER_FILES})
source_group(src\\lights FILES ${SGAL_LIGHTS_SOURCE_FILES} ${SGAL_LIGHTS_HEADER_FILES})

#Geo
set(SGAL_GEO_SOURCE_FILES ${SGAL_GEO_SOURCE_FILES} lib/geo/Bounding_box.cpp)
set(SGAL_GEO_SOURCE_FILES ${SGAL_GEO_SOURCE_FILES} lib/geo/Line.cpp)
set(SGAL_GEO_SOURCE_FILES ${SGAL_GEO_SOURCE_FILES} lib/geo/Matrix3f.cpp)
set(SGAL_GEO_SOURCE_FILES ${SGAL_GEO_SOURCE_FILES} lib/geo/Matrix4f.cpp)
set(SGAL_GEO_SOURCE_FILES ${SGAL_GEO_SOURCE_FILES} lib/geo/Plane.cpp)
set(SGAL_GEO_SOURCE_FILES ${SGAL_GEO_SOURCE_FILES} lib/geo/Vector2f.cpp)
set(SGAL_GEO_SOURCE_FILES ${SGAL_GEO_SOURCE_FILES} lib/geo/Vector2u.cpp)
set(SGAL_GEO_SOURCE_FILES ${SGAL_GEO_SOURCE_FILES} lib/geo/Vector2sh.cpp)
set(SGAL_GEO_SOURCE_FILES ${SGAL_GEO_SOURCE_FILES} lib/geo/Vector3f.cpp)
set(SGAL_GEO_SOURCE_FILES ${SGAL_GEO_SOURCE_FILES} lib/geo/Vector3sh.cpp)
set(SGAL_GEO_SOURCE_FILES ${SGAL_GEO_SOURCE_FILES} lib/geo/Vector4f.cpp)
set(SGAL_GEO_SOURCE_FILES ${SGAL_GEO_SOURCE_FILES} lib/geo/Rotation.cpp)
set(SGAL_GEO_HEADER_FILES ${SGAL_GEO_HEADER_FILES} include/geo/SGAL/Bounding_box.hpp)
set(SGAL_GEO_HEADER_FILES ${SGAL_GEO_HEADER_FILES} include/geo/SGAL/Line.hpp)
set(SGAL_GEO_HEADER_FILES ${SGAL_GEO_HEADER_FILES} include/geo/SGAL/Matrix3f.hpp)
set(SGAL_GEO_HEADER_FILES ${SGAL_GEO_HEADER_FILES} include/geo/SGAL/Matrix4f.hpp)
set(SGAL_GEO_HEADER_FILES ${SGAL_GEO_HEADER_FILES} include/geo/SGAL/Plane.hpp)
set(SGAL_GEO_HEADER_FILES ${SGAL_GEO_HEADER_FILES} include/geo/SGAL/Rotation.hpp)
set(SGAL_GEO_HEADER_FILES ${SGAL_GEO_HEADER_FILES} include/geo/SGAL/Vector2f.hpp)
set(SGAL_GEO_HEADER_FILES ${SGAL_GEO_HEADER_FILES} include/geo/SGAL/Vector2sh.hpp)
set(SGAL_GEO_HEADER_FILES ${SGAL_GEO_HEADER_FILES} include/geo/SGAL/Vector2u.hpp)
set(SGAL_GEO_HEADER_FILES ${SGAL_GEO_HEADER_FILES} include/geo/SGAL/Vector3f.hpp)
set(SGAL_GEO_HEADER_FILES ${SGAL_GEO_HEADER_FILES} include/geo/SGAL/Vector3sh.hpp)
set(SGAL_GEO_HEADER_FILES ${SGAL_GEO_HEADER_FILES} include/geo/SGAL/Vector4f.hpp)
set(SGAL_GEO_HEADER_FILES ${SGAL_GEO_HEADER_FILES} include/geo/SGAL/Vector4ub.hpp)
set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} ${SGAL_GEO_SOURCE_FILES} ${SGAL_GEO_HEADER_FILES})
source_group(src\\geo FILES ${SGAL_GEO_SOURCE_FILES} ${SGAL_GEO_HEADER_FILES})

#Loaders
set(SGAL_LOADERS_SOURCE_FILES ${SGAL_LOADERS_SOURCE_FILES} lib/loaders/Utilities.cpp)
set(SGAL_LOADERS_SOURCE_FILES ${SGAL_LOADERS_SOURCE_FILES} lib/loaders/Element.cpp)
set(SGAL_LOADERS_HEADER_FILES ${SGAL_LOADERS_HEADER_FILES} include/loaders/SGAL/Element.hpp)
set(SGAL_LOADERS_HEADER_FILES ${SGAL_LOADERS_HEADER_FILES} include/loaders/SGAL/Utilities.hpp)
set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} ${SGAL_LOADERS_SOURCE_FILES} ${SGAL_LOADERS_HEADER_FILES})
source_group(src\\loaders FILES ${SGAL_LOADERS_SOURCE_FILES} ${SGAL_LOADERS_HEADER_FILES})

#Utilities
set(SGAL_UTILITIES_SOURCE_FILES ${SGAL_UTILITIES_SOURCE_FILES} lib/utilities/Generic_option_parser.cpp)
set(SGAL_UTILITIES_SOURCE_FILES ${SGAL_UTILITIES_SOURCE_FILES} lib/utilities/Bench_option_parser.cpp)
set(SGAL_UTILITIES_SOURCE_FILES ${SGAL_UTILITIES_SOURCE_FILES} lib/utilities/Conf_option_parser.cpp)
set(SGAL_UTILITIES_SOURCE_FILES ${SGAL_UTILITIES_SOURCE_FILES} lib/utilities/File_format_2d.cpp)
set(SGAL_UTILITIES_SOURCE_FILES ${SGAL_UTILITIES_SOURCE_FILES} lib/utilities/File_format_3d.cpp)
set(SGAL_UTILITIES_SOURCE_FILES ${SGAL_UTILITIES_SOURCE_FILES} lib/utilities/IO_option_parser.cpp)
set(SGAL_UTILITIES_SOURCE_FILES ${SGAL_UTILITIES_SOURCE_FILES} lib/utilities/Option_parser.cpp)
set(SGAL_UTILITIES_SOURCE_FILES ${SGAL_UTILITIES_SOURCE_FILES} lib/utilities/Native_window_item.cpp)
set(SGAL_UTILITIES_SOURCE_FILES ${SGAL_UTILITIES_SOURCE_FILES} lib/utilities/Window_option_parser.cpp)
if (WIN32)
	set(SGAL_UTILITIES_SOURCE_FILES ${SGAL_UTILITIES_SOURCE_FILES} lib/utilities/Windows_window_item.cpp)
	set(SGAL_UTILITIES_SOURCE_FILES ${SGAL_UTILITIES_SOURCE_FILES} lib/utilities/Windows_window_manager.cpp)
else()
	set(SGAL_UTILITIES_SOURCE_FILES ${SGAL_UTILITIES_SOURCE_FILES} lib/utilities/X11_window_item.cpp)
	set(SGAL_UTILITIES_SOURCE_FILES ${SGAL_UTILITIES_SOURCE_FILES} lib/utilities/X11_window_manager.cpp)
endif()

set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/App_error_handle_int.hpp)
set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/Bench_option_parser.hpp)
set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/Command_line_parser.hpp)
set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/Conf_option_parser.hpp)
set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/Generic_option_parser.hpp)
set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/Native_window_item.hpp)
set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/Native_window_manager.hpp)
set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/Option_parser.hpp)
set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/Scene.hpp)
set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/Window_item.hpp)
set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/Window_manager.hpp)
set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/Window_option_parser.hpp)
if (WIN32)
	set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/Windows_window_item.hpp)
	set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/Windows_window_manager.hpp)
else()
	set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/X11_window_item.hpp)
	set(SGAL_UTILITIES_HEADER_FILES ${SGAL_UTILITIES_HEADER_FILES} include/utilities/SGAL/X11_window_manager.hpp)
endif()

set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} ${SGAL_UTILITIES_SOURCE_FILES} ${SGAL_UTILITIES_HEADER_FILES})
source_group(src\\utilities FILES ${SGAL_UTILITIES_SOURCE_FILES} ${SGAL_UTILITIES_HEADER_FILES})

#Interpolators
set(SGAL_INTERPOLATORS_SOURCE_FILES ${SGAL_INTERPOLATORS_SOURCE_FILES} lib/interpolators/Interpolator.cpp)
set(SGAL_INTERPOLATORS_SOURCE_FILES ${SGAL_INTERPOLATORS_SOURCE_FILES} lib/interpolators/Rotation_interpolator.cpp)
set(SGAL_INTERPOLATORS_SOURCE_FILES ${SGAL_INTERPOLATORS_SOURCE_FILES} lib/interpolators/Position_interpolator.cpp)
set(SGAL_INTERPOLATORS_SOURCE_FILES ${SGAL_INTERPOLATORS_SOURCE_FILES} lib/interpolators/Coordinate_interpolator.cpp)
set(SGAL_INTERPOLATORS_SOURCE_FILES ${SGAL_INTERPOLATORS_SOURCE_FILES} lib/interpolators/Vector3f_interpolator.cpp)
set(SGAL_INTERPOLATORS_SOURCE_FILES ${SGAL_INTERPOLATORS_SOURCE_FILES} lib/interpolators/Scalar_interpolator.cpp)
set(SGAL_INTERPOLATORS_SOURCE_FILES ${SGAL_INTERPOLATORS_SOURCE_FILES} lib/interpolators/Color_interpolator.cpp)
set(SGAL_INTERPOLATORS_HEADER_FILES ${SGAL_INTERPOLATORS_HEADER_FILES} include/interpolators/SGAL/Color_interpolator.hpp)
set(SGAL_INTERPOLATORS_HEADER_FILES ${SGAL_INTERPOLATORS_HEADER_FILES} include/interpolators/SGAL/Comp_color_interpolator.hpp)
set(SGAL_INTERPOLATORS_HEADER_FILES ${SGAL_INTERPOLATORS_HEADER_FILES} include/interpolators/SGAL/Comp_normal_interpolator.hpp)
set(SGAL_INTERPOLATORS_HEADER_FILES ${SGAL_INTERPOLATORS_HEADER_FILES} include/interpolators/SGAL/Comp_position_interpolator.hpp)
set(SGAL_INTERPOLATORS_HEADER_FILES ${SGAL_INTERPOLATORS_HEADER_FILES} include/interpolators/SGAL/Comp_rotation_interpolator.hpp)
set(SGAL_INTERPOLATORS_HEADER_FILES ${SGAL_INTERPOLATORS_HEADER_FILES} include/interpolators/SGAL/Comp_scalar_interpolator.hpp)
set(SGAL_INTERPOLATORS_HEADER_FILES ${SGAL_INTERPOLATORS_HEADER_FILES} include/interpolators/SGAL/Comp_vector3f_interpolator.hpp)
set(SGAL_INTERPOLATORS_HEADER_FILES ${SGAL_INTERPOLATORS_HEADER_FILES} include/interpolators/SGAL/Coordinate_interpolator.hpp)
set(SGAL_INTERPOLATORS_HEADER_FILES ${SGAL_INTERPOLATORS_HEADER_FILES} include/interpolators/SGAL/Interpolator.hpp)
set(SGAL_INTERPOLATORS_HEADER_FILES ${SGAL_INTERPOLATORS_HEADER_FILES} include/interpolators/SGAL/Normal_interpolator.hpp)
set(SGAL_INTERPOLATORS_HEADER_FILES ${SGAL_INTERPOLATORS_HEADER_FILES} include/interpolators/SGAL/Position_interpolator.hpp)
set(SGAL_INTERPOLATORS_HEADER_FILES ${SGAL_INTERPOLATORS_HEADER_FILES} include/interpolators/SGAL/Rotation_interpolator.hpp)
set(SGAL_INTERPOLATORS_HEADER_FILES ${SGAL_INTERPOLATORS_HEADER_FILES} include/interpolators/SGAL/Scalar_interpolator.hpp)
set(SGAL_INTERPOLATORS_HEADER_FILES ${SGAL_INTERPOLATORS_HEADER_FILES} include/interpolators/SGAL/Vector3f_interpolator.hpp)
set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} ${SGAL_INTERPOLATORS_SOURCE_FILES} ${SGAL_INTERPOLATORS_HEADER_FILES})
source_group(src\\interpolators FILES ${SGAL_INTERPOLATORS_SOURCE_FILES} ${SGAL_INTERPOLATORS_HEADER_FILES})

#IO
set(SGAL_IO_SOURCE_FILES ${SGAL_IO_SOURCE_FILES} lib/IO/Obj_formatter.cpp)
set(SGAL_IO_SOURCE_FILES ${SGAL_IO_SOURCE_FILES} lib/IO/Stl_binary_formatter.cpp)
set(SGAL_IO_SOURCE_FILES ${SGAL_IO_SOURCE_FILES} lib/IO/Stl_formatter.cpp)
set(SGAL_IO_SOURCE_FILES ${SGAL_IO_SOURCE_FILES} lib/IO/Text_formatter.cpp)
set(SGAL_IO_SOURCE_FILES ${SGAL_IO_SOURCE_FILES} lib/IO/Vrml_formatter.cpp)
set(SGAL_IO_HEADER_FILES ${SGAL_IO_HEADER_FILES} include/IO/SGAL/Formatter.hpp)
set(SGAL_IO_HEADER_FILES ${SGAL_IO_HEADER_FILES} include/IO/SGAL/Stl_binary_formatter.hpp)
set(SGAL_IO_HEADER_FILES ${SGAL_IO_HEADER_FILES} include/IO/SGAL/Stl_formatter.hpp)
set(SGAL_IO_HEADER_FILES ${SGAL_IO_HEADER_FILES} include/IO/SGAL/Obj_formatter.hpp)
set(SGAL_IO_HEADER_FILES ${SGAL_IO_HEADER_FILES} include/IO/SGAL/Text_formatter.hpp)
set(SGAL_IO_HEADER_FILES ${SGAL_IO_HEADER_FILES} include/IO/SGAL/Vrml_formatter.hpp)
set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} ${SGAL_IO_SOURCE_FILES} ${SGAL_IO_HEADER_FILES})
source_group(src\\io FILES ${SGAL_IO_SOURCE_FILES} ${SGAL_IO_HEADER_FILES})

#The rest of the files:
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/assertions.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Accumulation.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Appearance.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Background.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Billboard.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Bindable_node.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Bindable_stack.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Bounding_sphere.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Camera.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Collision.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Color_background.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Color_map.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Configuration.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Container.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Container_factory.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Container_proto.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Context.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Composed_shader.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Cube_environment.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Cull_context.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Draw_action.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Environment_background.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Exporter.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Field.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Field_info.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Font.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Font_outliner.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Font_style.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Fragment_shader.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Frustum.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Gfx_conf.cpp)
#TODO Figure this out
#ifeq ($(SGAL_USE_GLUT), 1)
#set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Glut_font.cpp
#endif
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Gl_wrapper.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Group.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Halftone.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Image_background.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Image.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Image_sphere_environment.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Image_texture.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Image_url.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Imagemagick_font.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/initialize.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Loader.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Isect_action.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Material.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Multisample.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Navigation_info.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Node.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Polyhedron_attributes_action.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Polyhedron_attributes_array.cpp)
# set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Record_action.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Route.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Scene_graph.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Script_base.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Simulation.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Shader.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Shape.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Snapshot.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Sphere_environment.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Switch.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Tex_gen.cpp)
# set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Text_texture.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Texture.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Texture_2d.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Texture_font.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Texture_transform.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Trace.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Transform.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Vertex_shader.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Volume_action.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/Surface_area_action.cpp)
set(SGAL_OTHER_SOURCE_FILES ${SGAL_OTHER_SOURCE_FILES} lib/World_info.cpp)
set(SGAL_OTHER_HEADER_FILES ${SGAL_OTHER_HEADER_FILES} include/SGAL/construct_triangulation.hpp)
set(SGAL_OTHER_HEADER_FILES ${SGAL_OTHER_HEADER_FILES} include/SGAL/Font_outliner.hpp)
set(SGAL_OTHER_HEADER_FILES ${SGAL_OTHER_HEADER_FILES} include/SGAL/Face_nesting_level.hpp)
set(SGAL_OTHER_HEADER_FILES ${SGAL_OTHER_HEADER_FILES} include/SGAL/Font_style.hpp)
set(SGAL_OTHER_HEADER_FILES ${SGAL_OTHER_HEADER_FILES} include/SGAL/Polyhedron_attributes.hpp)
set(SGAL_OTHER_HEADER_FILES ${SGAL_OTHER_HEADER_FILES} include/SGAL/Polyhedron_attributes_action.hpp)
set(SGAL_OTHER_HEADER_FILES ${SGAL_OTHER_HEADER_FILES} include/SGAL/Polyhedron_attributes_array.hpp)
set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} ${SGAL_OTHER_SOURCE_FILES} ${SGAL_OTHER_HEADER_FILES})
source_group(src FILES ${SGAL_OTHER_SOURCE_FILES} ${SGAL_OTHER_HEADER_FILES})

if (SGAL_USE_V8)
  add_definitions(-DSGAL_USE_V8)
  set(SGAL_SOURCE_FILES ${SGAL_SOURCE_FILES} lib/Script.cpp)
endif()

#Add all include directories
include_directories(include/)
include_directories(include/SGAL)
include_directories(include/engines)
include_directories(include/events)
include_directories(include/geo)
include_directories(include/geometries)
include_directories(include/geometries/primitive_shapes)
include_directories(include/geometries/puzzles)
include_directories(include/interpolators)
include_directories(include/IO)
include_directories(include/lights)
include_directories(include/loaders)
include_directories(include/primitives)
include_directories(include/sensors)
include_directories(include/utilities)
include_directories(lib)
include_directories(lib/loaders)
include_directories(lib/primitives)
include_directories(lib/interpolators)

# Add defines
add_definitions(-DSGAL_SGAL_SOURCE)
add_definitions(-DGL2PSDLL)
add_definitions(-DSGAL_LIB)

if (WIN32)
  add_definitions(/wd4251)
else(WIN32)
  add_definitions(-DGL_GLEXT_PROTOTYPES)
endif(WIN32)

if (APPLE)
  add_definitions(-DMAGICKCORE_QUANTUM_DEPTH=16)
  add_definitions(-DMAGICKCORE_HDRI_ENABLE=0)
endif(APPLE)

#Add library
if (BUILD_SHARED_LIBS)
	add_definitions(-DSGAL_ALL_DYN_LINK)
	add_library(SGAL SHARED ${SGAL_SOURCE_FILES})
else()
	add_library(SGAL STATIC ${SGAL_SOURCE_FILES})
endif()


set_target_properties(SGAL PROPERTIES
  VERSION "${SGAL_SOVERSION}"
  SOVERSION "${SGAL_SONAME_VERSION}"
)

# Add links
if (NOT WIN32)
  set (NON_WIN32_LIBRARIES ${X11_LIBRARIES} ${X11_Xxf86vm_LIB})
  if (APPLE)
    set (NON_WIN32_LIBRARIES ${NON_WIN32_LIBRARIES} /opt/X11/lib/libGL.dylib)
  endif(APPLE)
endif(NOT WIN32)

target_link_libraries(SGAL
                      ${Boost_FILESYSTEM_LIBRARY}
                      ${Boost_SYSTEM_LIBRARY}
                      ${Boost_PROGRAM_OPTIONS_LIBRARY}
                      ${ImageMagick_Magick++_LIBRARY}
		      ${FREETYPE_LIBRARIES}
		      ${V8_LIBRARY}
                      ${OPENGL_LIBRARIES}
                      ${NON_WIN32_LIBRARIES})

# Installation
set(SGAL_INCLUDE_DIRS
    ${CMAKE_CURRENT_SOURCE_DIR}/include
    ${CMAKE_CURRENT_SOURCE_DIR}/include/engines
    ${CMAKE_CURRENT_SOURCE_DIR}/include/events
    ${CMAKE_CURRENT_SOURCE_DIR}/include/geo
    ${CMAKE_CURRENT_SOURCE_DIR}/include/geometries
    ${CMAKE_CURRENT_SOURCE_DIR}/include/geometries/primitive_shapes
    ${CMAKE_CURRENT_SOURCE_DIR}/include/interpolators
    ${CMAKE_CURRENT_SOURCE_DIR}/include/IO
    ${CMAKE_CURRENT_SOURCE_DIR}/include/lights
    ${CMAKE_CURRENT_SOURCE_DIR}/include/loaders
    ${CMAKE_CURRENT_SOURCE_DIR}/include/primitives
    ${CMAKE_CURRENT_SOURCE_DIR}/include/sensors
    ${CMAKE_CURRENT_SOURCE_DIR}/include/utilities)

foreach (dir ${SGAL_INCLUDE_DIRS})
  if (EXISTS ${dir}/SGAL)
    install(DIRECTORY ${dir}/SGAL
            DESTINATION ${SGAL_INSTALL_INC_DIR}
            FILES_MATCHING PATTERN "*.hpp"
            # PERMISSIONS OWNER_READ OWNER_WRITE GROUP_READ WORLD_READ
    )
  endif()
endforeach()

install(TARGETS SGAL
        RUNTIME DESTINATION ${SGAL_INSTALL_BIN_DIR}
        LIBRARY DESTINATION ${SGAL_INSTALL_LIB_DIR}
        ARCHIVE DESTINATION ${SGAL_INSTALL_LIB_DIR})
